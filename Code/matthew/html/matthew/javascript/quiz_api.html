<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Quiz</title>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  </head>
  <body>
    <h1 id="title_header"></h1>
    <div id="question_div"></div>
    <div id="answer_div">
      <!-- <div>
        <input type="radio" name="fruit" value="0" checked><span>Apples</span>
      </div>
      <div>
        <input type="radio" name="fruit" value="0" checked><span>Apples</span>
      </div>

      <input type="radio" name="fruit" value="0" checked><span>Apples</span><br>
      <input type="radio" name="fruit" value="1"><span>Bananas</span><br>
      <input type="radio" name="fruit" value="2"><span>Pears</span> -->

    </div>
    <button id="submit_answer_btn">submit</button>
    <pre id="feedback_div"></pre>








    <script type="text/javascript">

      let title_header = document.querySelector("#title_header")
      let question_div = document.querySelector("#question_div")
      let answer_div = document.querySelector("#answer_div")
      let feedback_div = document.querySelector("#feedback_div")
      let submit_answer_btn = document.querySelector("#submit_answer_btn")



      let quiz = JSON.parse(`{"title": "Al's favorite colors", "questions": [{"text": "What is Al's least favorite color?", "answers": [{"text": "blue", "correct": false}, {"text": "dark yellow", "correct": true}]}, {"text": "What is Al's favorite color?", "answers": [{"text": "blue", "correct": true}, {"text": "dark yellow", "correct": false}]}]}`)
      

      function loadQuestion(question){

        question_div.innerHTML = question.text
        let answers = question.answers
        answer_div.innerHTML = ""
        for (let i=0; i<answers.length; i++){
          let button = document.createElement("input")
          button.setAttribute("type", "radio")
          button.setAttribute("name", "questionsanswersbuttonscelerypigeons")
          // button.setAttribute("value", i)
          button.setAttribute("value", answers[i].correct)
          if (i==0){
            button.setAttribute("checked", "questioelerypigeons")
          }
          let span = document.createElement("span")
          span.innerText = answers[i].text
          let br = document.createElement("br")
          answer_div.appendChild(button)
          answer_div.appendChild(span)
          answer_div.appendChild(br)

        }
      }

      console.log(quiz)
      //console.log(quiz.questions[0].answers[0])
      title_header.innerHTML = quiz.title
      let question_number = 0
      let score = 0
      loadQuestion(quiz.questions[0])

      submit_answer_btn.onclick = function(){
        let correctQuery = document.querySelector('input[name="questionsanswersbuttonscelerypigeons"]:checked').value


        if (correctQuery == "true"){
          alert("Correct!")
          score++
          console.log(quiz.questions[question_number])
          // feedback_div.innerText = "Correct!"
        } else{

          console.log(quiz.questions[question_number])
          let answers = quiz.questions[question_number].answers
          for (let i=0; i<answers.length; i++){
            if (answers[i].correct == true){
              alert("Incorrect; the correct answer is: "+ answers[i].text )
            }
          }
          // feedback_div.innerText =  "Incorrect!"
        }
        question_number++
        if (question_number >= quiz.questions.length){
          alert(`Quiz complete. Your final score is ${score} out of ${quiz.questions.length}`)
          feedback_div.innerText = `
                                /\\___
                     @@@@@@@@@@@  O  \\
                  @@@@@@@@@@@@@@@____/
                 @@@@@@@@@@@@@@@@
                 @ @@@@@@@@@@@@
                    ||      ||
                    ~~      ~~`
          submit_answer_btn.setAttribute("disabled", "sheep")

          if (score == quiz.questions.length) {
            setInterval(function() {
              feedback_div.style.color = `hsl(${Math.floor(Math.random()*360)},100%,50%)`
            }, 100)
          }
        } else {
          loadQuestion(quiz.questions[question_number])
        }

      }









    </script>
  </body>
</html>
