<!-- JavaScript lab: lab05_v2_randomRedirector.html -->
<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JS Lab 05: Random Redictor - v2</title>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700&display=swap" rel="stylesheet">
    <style media="screen" type="text/css">
      html, body {
        box-sizing: border-box;
        height: 100%;
        margin: 0;
        min-height: 100%;
        padding: 0;
        width: 100%;
      }
      body {
        font-family: 'Open Sans', sans-serif;
      }
      #version_info {
        padding: 20px 0;
      }
      #lab_instructions {
        background-color: #C0C0C0;
        vertical-align: top;
        width: 100%;
      }
      #lab_instructions > * {
        margin: 0 8px 0;
        padding-top: 18.720px;
      }
      .monospace {
        font-family: 'Roboto Mono', monospace;
        color: blue;
      }
      #container {
        background-color: rgba(255,255,255,0.5);
        height: 100%;
        margin: 0;
        padding: 10px;
        width: 100%;
      }
      #input_seconds, #bt_randomURL {
        font-size: 24px;
        padding: 15px 32px;
        margin: 25px 10px auto;
      }
      #input_seconds {
        width: 300px;
      }
      #countdown_text {
        font-size: 24px;
        margin: 25px 25px;
      }
      #countdown_clock {
        background-color: rgba(255,0,0,0.5);
        font-size: 24px;
        padding: 15px 32px;
        margin: 25px 10px auto;
      }
      h3 {
        margin-left: 25px;
      }
    </style>
  </head>
  <body>
    <div id="lab_instructions">
      <h1>JS Lab 05: Random Redirector</h1>
      <div>Create a page which randomly redirectly to another.<br>Create an array of urls (as strings), and randomly pick one using <span class="monospace">Math.random()</span>.<br>Then redirect to the page using <span class="monospace">window.location</span>.
      </div>
      <div id="version_info">
        <span><b>v2: adding countdown timer to page</b></span>
      </div>
    </div>
    <div id="container">
      <input id="input_seconds" type="text" placeholder="enter delay time in seconds"/>
      <button id="bt_randomURL">click me to start timer before redirecting to another page</button>
      <div id="countdown_text">Page will redirect in: <span id="countdown_clock"></span></div>
      <hr/>
      <div id="code">
        <h3>The Javascript:</h3>
        <pre>
          &lt;script type="text/javascript"&gt;
          // GOAL: Create a page which randomly redirectly to another.

          // Get elements out of the DOM
          let container = document.querySelector('#container')
          let bt_randomURL = document.querySelector('#bt_randomURL')

          // Define an array of urls (as strings)
          let arr_urls = [
            "https://google.com",
            "https://linux.org",
            "https://atom.io",
            "https://python.org/",
            "https://pdxcodeguild.com",
            "https://vuejs.org",
            "https://www.w3schools.com/",
            "https://json.org/",
            "https://developer.mozilla.org",
            "https://zenfolio.com/‎"
          ]

          // Randomly pick one using `Math.random()`
          x = Math.floor(Math.random()*arr_urls.length)

          // v2: Using JavaScript's timing events show a 5-second countdown to the user.
          // When the countdown is finished, redirect to a random page.
          bt_randomURL.onclick = function() {
            let delay_time_sec = parseInt(input_seconds.value)
            let delay_time_ms = delay_time_sec*1000
            let timeout = null
            timeout = setTimeout(function() {
              window.location.href = arr_urls[x]
            }, delay_time_ms)
            let countdown_secs = null
            countdown_secs = setInterval(function() {
              countdown_clock.innerText = delay_time_sec
              delay_time_sec--
            }, 1000)
          }
          &lt;/script&gt;
        </pre>
      </div> <!-- code div end -->
    </div> <!-- container div end -->
    <script type="text/javascript">
    // GOAL: Create a page which randomly redirectly to another.

    // Get elements out of the DOM
    let container = document.querySelector('#container')
    let input_seconds = document.querySelector('#input_seconds')
    let bt_randomURL = document.querySelector('#bt_randomURL')
    let countdown_clock = document.querySelector('#countdown_clock')

    // Define an array of urls (as strings)
    let arr_urls = [
      "https://google.com",
      "https://linux.org",
      "https://atom.io",
      "https://python.org/",
      "https://pdxcodeguild.com",
      "https://vuejs.org",
      "https://www.w3schools.com/",
      "https://json.org/",
      "https://developer.mozilla.org",
      "https://zenfolio.com/‎"
    ]

    // Randomly pick one using `Math.random()`
    x = Math.floor(Math.random()*arr_urls.length)

    // v2: Using JavaScript's timing events show a 5-second countdown to the user.
    // When the countdown is finished, redirect to a random page.
    bt_randomURL.onclick = function() {                  // listen for button clicks
      let delay_time_sec = parseInt(input_seconds.value) // convert input string to integer
      let delay_time_ms = delay_time_sec*1000            // multiply by 1000 to get ms (used in setTimeout)
      let timeout = null                                 // initialize timeout variable
      timeout = setTimeout(function() {                  // inititalize the setTimeout func (aka "do once")
        window.location.href = arr_urls[x]               // use the random number from line 151 as index ..
      }, delay_time_ms)                                  // .. for the arr_urls array to get random URL
      let countdown_secs = null                          // initialize countdown seconds variable
      countdown_secs = setInterval(function() {          // initialize setInterval func (aka "do repeatedly")
        countdown_clock.innerText = delay_time_sec       // set (or change) innerText to input value ..
        delay_time_sec--                                 // .. the, decrement input value by 1
      }, 1000)                                           // .. repeat once per second (or 1000ms)
    }

    </script>
  </body>
</html>
